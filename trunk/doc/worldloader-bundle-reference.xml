<?xml version="1.0" encoding="UTF-8"?>

<!-- For for information, see the source for these classes:
      XBundle, WorldLoader, BaseEntityLoader, BaseRoomLoader -->

<xbundle name="reference-bundle">
  <passage id="simple-passage">
    Untemplated text.
  </passage>
  <passage id="templated-passage" format="ftl">
    [#if stateobj.variable == 2]
    Hello Jacque!@p
    [/#if]
    A passage templated using FreeMarker Template Language (FTL).
  </passage>
  <passage id="scripted-passage" script="bsh">
    out("BeanShell code. Use embedded escape sequences rather than escape characters.@n");
    // For example @n rather than \n.
  </passage>
  <passage id="format-string-passage" format="printf">
    The %s is a very interesting item.
  </passage>

  <entity id="basic-entity-variant-1">
    <name>Old Tractor</name>
    <indefiniteArticle>an</indefiniteArticle>
    <description format="ftl">
      An old tractor with ${stateobj.numTires} tires.
    </description>
    <attributes>
      <attr>moveable</attr>
      <attr>lightsource</attr>
    </attributes>
  </entity>

  <!-- You specify the initial placement of an entity by including either a 'location' attribute
       or child element to place it in a room, or a 'container' attribute or child element to
       place it in another entity (which must be a container). -->
  <entity id="basic-entity-variant-2" name="New Tractor" indefiniteArticle="a"
          attributes="moveable, lightsource" location="grassy-field">
    <description passageId="equipment-description" />
    <script>
      <![CDATA[
        void enterScope(Entity e) {
            gm.println(e.getName() + " rumbles at your approach.");
        }
      ]]>
    </script>
  </entity>

  <passage id="equipment-description" format="ftl">
    The ${entity.name} is a nice piece of equipment.
  </passage>

  <!-- Doors do not specify a location; rather, they appear in both of the rooms they connect. -->
  <entity id="door-entity" type="door" name="Iron Door" closedExitLabel="Iron Door" key="iron-key"
          attributes="closed">
    <description>
      A doughty iron door.
    </description>
    <rooms>
      <!-- The door connects the N exit of cave-entrance with the SW exit of grassy-field. -->
      <room1 roomId="cave-entrance" pos="N" label="Dark Cave" />
      <room2 roomId="grassy-field" pos="SW" />
    </rooms>
  </entity>

  <entity id="iron-chest" type="container" inPrep="in" outPrep="from"
          attributes="closed, locked">
    <location>small-hut</location>
    <description>A doughty iron chest.</description>
    <key>brass-key</key>
  </entity>

  <entity id="cheese" attributes="takeable" container="iron-chest">
    <description>A nice piece of cheese.</description>
  </entity>

  <room id="grassy-field" name="Grassy Field" exitName="Field">
    <description>
      A grassy field stretches out to the base of the cliffs.
    </description>
    <exits>
      <!-- These should not include exits connected by doors, as the door will handle those. -->
      <exit roomId="cliffs" pos="N" label="Vague Cliffs" />
      <exit roomId="small-hut" pos="X2" />
    </exits>
  </room>

  <player location="grassy-field">
    <inventory>
      <item>iron-key</item>
      <item>old-map</item>
      <item equipped="true">elvish-sword</item>
    </inventory>
  </player>
</xbundle>
